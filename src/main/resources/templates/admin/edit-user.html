<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Edit User - Admin Panel</title>
<meta charset="UTF-8">
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Segoe UI', sans-serif; background: #f5f7fa; }
.navbar { background: linear-gradient(135deg, #dc2626, #991b1b); color: white; padding: 15px 20px; }
.navbar-content { max-width: 1400px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; }
.navbar h1 { font-size: 20px; }
.navbar-links { display: flex; gap: 12px; }
.navbar a { color: white; text-decoration: none; padding: 8px 16px; border-radius: 6px; font-size: 14px; }
.navbar a:hover { background: rgba(255,255,255,0.2); }
.navbar button { background: none; border: none; color: white; cursor: pointer; padding: 8px 16px; font-size: 14px; }
.navbar button:hover { background: rgba(255,255,255,0.2); border-radius: 6px; }
.container { max-width: 800px; margin: 40px auto; padding: 0 20px; }
.alert { padding: 14px 20px; border-radius: 8px; margin-bottom: 20px; font-size: 14px; }
.alert-success { background: #dcfce7; color: #166534; border: 1px solid #bbf7d0; }
.alert-error { background: #fee2e2; color: #991b1b; border: 1px solid #fca5a5; }
.card { background: white; padding: 40px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.08); }
.card h2 { font-size: 24px; color: #333; margin-bottom: 30px; }
.form-group { margin-bottom: 25px; }
.form-group label { display: block; color: #374151; font-weight: 600; margin-bottom: 8px; font-size: 14px; }
.form-group input { width: 100%; padding: 12px 16px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 14px; }
.form-group input:focus { outline: none; border-color: #dc2626; }
.form-group input:disabled { background: #f3f4f6; color: #6b7280; cursor: not-allowed; }
.form-group small { color: #6b7280; font-size: 13px; display: block; margin-top: 5px; }
.buttons { display: flex; gap: 10px; margin-top: 30px; }
.btn { padding: 12px 24px; border: none; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; text-decoration: none; display: inline-block; }
.btn-primary { background: #dc2626; color: white; }
.btn-primary:hover { background: #b91c1c; }
.btn-secondary { background: #e5e7eb; color: #374151; }
.btn-secondary:hover { background: #d1d5db; }
</style>
</head>
<body>
<div class="navbar">
  <div class="navbar-content">
    <h1>üë®‚Äçüíº Admin Panel</h1>
    <div class="navbar-links">
      <a href="/admin/dashboard">Dashboard</a>
      <a href="/admin/users">Users</a>
      <form method="post" action="/logout" th:action="@{/logout}" style="display:inline;margin:0;">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
        <button type="submit">Logout</button>
      </form>
    </div>
  </div>
</div>

<div class="container">
  <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>
  <div th:if="${error}" class="alert alert-error" th:text="${error}"></div>

  <div class="card">
    <h2>‚úèÔ∏è Edit User</h2>
    
    <form method="post" th:action="@{/admin/user/{id}/edit(id=${user.id})}">
      <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
      
      <div class="form-group">
        <label for="username">Username</label>
        <input type="text" id="username" th:value="${user.username}" disabled>
        <small>Username cannot be changed</small>
      </div>
      
      <div class="form-group">
        <label for="fullName">Full Name</label>
        <input type="text" id="fullName" name="fullName" th:value="${user.fullName}" required>
      </div>
      
      <div class="form-group">
        <label for="email">Email</label>
        <input type="email" id="email" name="email" th:value="${user.email}" required>
      </div>
      
      <div class="form-group">
        <label for="password">New Password (leave blank to keep current)</label>
        <input type="password" id="password" name="password" minlength="6" placeholder="Enter new password or leave blank">
        <small>Minimum 6 characters. Leave blank to keep current password.</small>
      </div>
      
      <div class="form-group">
        <label for="credits">Credits</label>
        <input type="number" id="credits" name="credits" th:value="${user.credits}" step="1000" min="0" required>
      </div>
      
      <div class="buttons">
        <button type="submit" class="btn btn-primary">Save Changes</button>
        <a th:href="@{/admin/user/{id}(id=${user.id})}" class="btn btn-secondary">Cancel</a>
      </div>
    </form>
  </div>
</div>
</body>
</html>
